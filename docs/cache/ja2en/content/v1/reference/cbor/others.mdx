---
title: Other Tools
slug: en/v1/reference/cbor/others
---

## write

### Import

```ts
import { write } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`write` is a helper function that writes any JavaScript value encodable in CBOR to the `Writer`.

```ts
write(writer: Writer, value: unknown, options?: WriteOptions): void;
```

#### Arguments

##### `writer`

The `Writer` to write the value to the `Uint8Array`.

##### `value`

The JavaScript value to encode to a CBOR `Uint8Array`. The JavaScript values that can be passed to `value` are:

- Primitive values
  - `number`
  - `bigint`
  - `string`
  - `boolean`
  - `null`
  - `undefined`
- Objects with a `.toCBOR()` method
- Array or `Set`
- Plain object or `Map`
- `Uint8Array`
- `Simple` object
- Values that can be replaced by the optional `replacer`

If a value is not a primitive value and it has a `toCBOR` property that is a function, it will be called preferentially.

##### `options`

Write options.

`replacer?: Replacer | Replacer[]`
:   The encoder encodes most values into CBOR by default, but there are special values that are not so. You can replace them with encodable values. This option takes a function or an array of functions to implement the replacement. If the function returns the `CONTINUE` symbol obtained with `Symbol.for("@tai-kun/surrealdb/cbor/continue")`, the subsequent function will be called. If no replacement is found, a `SurrealTypeError` is thrown.

`isSafeMapKey?: (key: unknown, map: ReadonlyMap<unknown, unknown>) => boolean`
:   This option is a function to verify if the key of a `Map` object is safe. The function takes two arguments, `key` and `map`. `key` is the value of the key, and `map` is the `Map` object being validated. If the function returns `false`, a `CborUnsafeMapKeyError` is thrown. By default, it judges `"__proto__"` or `"constructor"` as unsafe keys. Note that specifying this option completely overrides the default validation. If you want to add your own validation to the default validation, you should also judge `"__proto__"` or `"constructor"` as unsafe keys.

`isSafeObjectKey?: (key: unknown, obj: { readonly [p: string]: unknown }) => boolean`
:   This option is a function to verify if the key of a plain object is safe. The function takes two arguments, `key` and `obj`. `key` is the value of the key, and `obj` is the plain object being validated. If the function returns `false`, a `CborUnsafeMapKeyError` is thrown. By default, it judges `"__proto__"` or `"constructor"` as unsafe keys. Note that specifying this option completely overrides the default validation. If you want to add your own validation to the default validation, you should also judge `"__proto__"` or `"constructor"` as unsafe keys.

#### Return Value

None.

## writeNumber

### Import

```ts
import { writeNumber } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writeNumber` is a helper function that writes a number to the `Writer`.

```ts
writeNumber(writer: Writer, value: number): void;
```

#### Arguments

##### `writer`

The `Writer` to write the value to the `Uint8Array`.

##### `value`

The number. For integers, values from -2^53-1 to 2^53-1 are valid. In JavaScript, there is no way to judge `.0` as a floating point number, so it will be encoded into CBOR as an integer value. For example, `-1.0` is `-1` and is an integer.

#### Return Value

None.

## writeBigInt

### Import

```ts
import { writeInteger } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writeBigInt` is a helper function that writes a `bigint` to the `Writer`.

```ts
writeBigInt(writer: Writer, value: bigint): void;
```

#### Arguments

##### `writer`

The `Writer` to write the value to the `Uint8Array`.

##### `value`

The `bigint`. Values from -2^64 to 2^64-1 are valid.

#### Return Value

None.

## writeByteString

### Import

```ts
import { writeByteString } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writeByteString` is a helper function that writes a `Uint8Array` to the `Writer`.

```ts
writeByteString(writer: Writer, value: Uint8Array): void;
```

#### Arguments

##### `writer`

The `Writer` to write the value to the `Uint8Array`.

##### `value`

The `Uint8Array`.

#### Return Value

None.

## writeUtf8String

### Import

```ts
import { writeUtf8String } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writeUtf8String` is a helper function that writes a UTF-8 string to the `Writer`.

```ts
writeUtf8String(writer: Writer, value: string): void;
```

#### Arguments

##### `writer`

The `Writer` to write the value to the `Uint8Array`.

##### `value`

The UTF-8 string.

#### Return Value

None.

## writeEncodedUtf8String

### Import

```ts
import { writeEncodedUtf8String } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writeEncodedUtf8String` is a helper function that writes a UTF-8 encoded string (`Uint8Array`) to the `Writer`.

```ts
writeEncodedUtf8String(writer: Writer, value: Uint8Array): void;
```

#### Arguments

##### `writer`

The `Writer` to write the value to the `Uint8Array`.

##### `value`

The UTF-8 encoded string (`Uint8Array`).

#### Return Value

None.

## writeBoolean

### Import

```ts
import { writeBoolean } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writeBoolean` is a helper function that writes a boolean to the `Writer`.

```ts
writeBoolean(writer: Writer, value: boolean): void;
```

#### Arguments

##### `writer`

The `Writer` to write the value to the `Uint8Array`.

##### `value`

The boolean.

#### Return Value

None.

## writeNullable

### Import

```ts
import { writeNullable } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writeNullable` is a helper function that writes `null` or `undefined` to the `Writer`.

```ts
writeNullable(writer: Writer, value: null | undefined): void;
```

#### Arguments

##### `writer`

The `Writer` to write the value to the `Uint8Array`.

##### `value`

The `null` or `undefined`.

#### Return Value

None.

## writeHeader

### Import

```ts
import { writeHeader } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writeHeader` is a helper function that writes the header of a CBOR data item to the `Writer`.

```ts
writeHeader(writer: Writer, mt: MajorType, length: number | bigint): void;
```

#### Arguments

##### `writer`

The `Writer` to write the value to the `Uint8Array`.

##### `mt`

The major type of the CBOR. Must be an integer from 0 to 7.

##### `length`

The data itself or the byte length of the data.

#### Return Value

None.

## writePayload

### Import

```ts
import { writePayload } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writePayload` is a helper function that writes the payload of a CBOR data item to the `Writer`.

```ts
writePayload(writer: Writer, value: Uint8Array): void;
```

#### Arguments

##### `writer`

The `Writer` to write the value to the `Uint8Array`.

##### `value`

The payload of the CBOR data item.

#### Return Value

None.
