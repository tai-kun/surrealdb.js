---
title: escape
slug: en/v1/reference/utils/escape
---

## quoteStr

`quoteStr` is a function that encloses a string with quotation marks. For convenience, it encloses even an empty string with quotation marks.

### Import

```ts
import { quoteStr } from "@tai-kun/surrealdb/utils";
```

### Usage

```ts
function quoteStr(str: string): string;
```

Encloses the string with quotation marks (`"` or `'`).

#### Arguments

##### `str`

The string to be enclosed in quotation marks.

#### Return Value

Returns the string enclosed in quotation marks. The quotation mark for enclosure changes depending on whether the given string contains a single quotation mark (`'`) or not:

- When the given string is empty
  - Returns `''`.
- When the given string does **not** contain a single quotation mark
  - Encloses it with a single quotation mark.
- When the given string does **contain** a single quotation mark
  - Encloses it with a double quotation mark.
- When the given string contains both a single and a double quotation mark
  - Encloses it with a double quotation mark.
  - The double quotation mark is escaped with a backslash (`\`).

#### Example

The following example encloses a string that **does not** contain a single quotation mark with a single quotation mark:

```ts
import { quoteStr } from "@tai-kun/surrealdb/utils";

console.log(quoteStr(``));
console.log(quoteStr(`a`));
console.log(quoteStr(`ğ©¸½`));
console.log(quoteStr(`ğŸ‘ğŸ½`));
console.log(quoteStr(`ãƒã‚š`));
```

Output:

```js
''
'a'
'ğ©¸½'
'ğŸ‘ğŸ½'
'ãƒã‚š'
```

The following example encloses a string that **does** contain a single quotation mark with a double quotation mark:

```ts
import { quoteStr } from "@tai-kun/surrealdb/utils";

console.log(quoteStr(`cat's`));
console.log(quoteStr(`ğ©¸½'s`));
console.log(quoteStr(`'ğŸ‘ğŸ½`));
console.log(quoteStr(`'ãƒã‚š`));
```

Output:

```js
"cat's"
"ğ©¸½'s"
"'ğŸ‘ğŸ½"
"'ãƒã‚š"
```

The following example encloses a string containing both a single and a double quotation mark with a double quotation mark and escapes if necessary:

```ts
import { quoteStr } from "@tai-kun/surrealdb/utils";

console.log(quoteStr(`cat's "toy"`));
console.log(quoteStr(`'\\"\\`));
console.log(quoteStr(`ğ©¸½'s "feed"`));
console.log(quoteStr(`'ğŸ‘ğŸ½"`));
console.log(quoteStr(`'ãƒã‚š"`));
```

Output:

```js
"cat's \"toy\""
"'\\\"\\"
"ğ©¸½'s \"feed\""
"'ğŸ‘ğŸ½\""
"'ãƒã‚š\""
```

## escapeKey

`escapeKey` is similar to [`quoteStr`](/en/reference/utils/quote-str/) but is a function used for object keys. For convenience, it encloses even an empty string with quotation marks.

### Import

```ts
import { escapeKey } from "@tai-kun/surrealdb/utils";
```

### Usage

```ts
function escapeKey(key: string): string;
```

#### Arguments

##### `key`

The object's key.

#### Return Value

Returns the escaped string. It encloses in double quotation marks if necessary:

- When the given string is empty
  - Returns `""`.
- When the given string is composed only of alphanumeric characters and underscores
  - Returns it as is.
- When the given string includes characters other than alphanumeric characters and underscores
  - Encloses it in double quotation marks.
- When the given string contains a backslash (`\`)
  - Escapes it.
- When the given string contains a double quotation mark
  - Escapes it.

#### Example

The following example gets the string as is because the string is composed only of alphanumeric characters and underscores:

```ts
import { escapeKey } from "@tai-kun/surrealdb/utils";

console.log(escapeKey(`123`));
console.log(escapeKey(`foo_bar`));
```

Output:

```js
123
foo_bar
```

The following example encloses the string with double quotation marks and escapes if necessary:

```ts
import { escapeKey } from "@tai-kun/surrealdb/utils";

console.log(escapeKey(``));
console.log(escapeKey(`foo-bar`));
console.log(escapeKey(`'\\"\\`));
console.log(escapeKey(`ğ©¸½'s "feed"`));
console.log(escapeKey(`'ğŸ‘ğŸ½"`));
console.log(escapeKey(`'ãƒã‚š"`));
```

Output:

```js
""
"foo-bar"
"'\\"\"
"ğ©¸½'s \"feed\""
"'ğŸ‘ğŸ½\""
"'ãƒã‚š\""
```

## escapeRid

`escapeRid` is similar to [`quoteStr`](/en/reference/utils/quote-str/) but is a function used for record IDs. For convenience, it encloses even an empty string with quotation marks.

### Import

```ts
import { escapeRid } from "@tai-kun/surrealdb/utils";
```

### Usage

```ts
function escapeRid(rid: string): string;
```

#### Arguments

##### `rid`

The ID part of the record ID.

#### Return Value

Returns the escaped string. It encloses in brackets (`âŸ¨âŸ©`) if necessary:

- When the given string is empty
  - Returns `âŸ¨âŸ©`.
- When the given string does not start with a digit and is composed only of alphanumeric characters and underscores
  - Returns it as is.
- When the given string contains a bracket (`âŸ©`)
  - Escapes it.
- When the given string starts with a digit or contains characters other than alphanumeric characters and underscores
  - Encloses it in brackets (`âŸ¨âŸ©`).

#### Example

The following example gets the string as is because the string does not start with a digit and is composed only of alphanumeric characters and underscores

```ts
import { escapeRid } from "@tai-kun/surrealdb/utils";

console.log(escapeRid(`foo_123`));
```

Output:

```js
foo_123
```

The following example encloses the string in brackets (`âŸ¨âŸ©`) and escapes if necessary:

```ts
import { escapeRid } from "@tai-kun/surrealdb/utils";

console.log(escapeRid(``));
console.log(escapeRid(`123`));
console.log(escapeRid(`foo-bar`));
console.log(escapeRid(`ğ©¸½'s âŸ¨feedâŸ©`));
console.log(escapeRid(`'ğŸ‘ğŸ½âŸ©`));
console.log(escapeRid(`'ãƒã‚šâŸ©`));
```

Output:

```js
âŸ¨âŸ©
âŸ¨123âŸ©
âŸ¨foo-barâŸ©
âŸ¨ğ©¸½'s âŸ¨feed\âŸ©âŸ©
âŸ¨'ğŸ‘ğŸ½\âŸ©âŸ©
âŸ¨'ãƒã‚š\âŸ©âŸ©
```

## escapeIdent

`escapeIdent` is similar to [`quoteStr`](/en/reference/utils/quote-str/) but is a function used for the names of namespaces, databases, tables, and fields. For convenience, it encloses even an empty string with quotation marks.

### Import

```ts
import { escapeIdent } from "@tai-kun/surrealdb/utils";
```

### Usage

```ts
function escapeIdent(ident: string): string;
```

#### Arguments

##### `ident`

The identifier.

#### Return Value

Returns the escaped string. It encloses in backticks (<code>`</code>) if necessary:

- When the given string is empty
  - Returns <code>``</code>.  {/* TODO(tai-kun): " ã«ãªã‚‹å•é¡Œè§£æ±ºã™ã‚‹ */}
- When the given string does not start with a digit and is composed only of alphanumeric characters and underscores
  - Returns it as is.
- When the given string contains a backtick (<code>`</code>)
  - Escapes it.
- When the given string starts with a digit or contains characters other than alphanumeric characters and underscores
  - Encloses it in backticks (<code>`</code>).

#### Example

The following example gets the string as is because the string does not start with a digit and is composed only of alphanumeric characters and underscores

```ts
import { escapeIdent } from "@tai-kun/surrealdb/utils";

console.log(escapeIdent(`foo_123`));
```

Output:

```js
foo_123
```

The following example encloses the string in backticks (<code>`</code>) and escapes if necessary:

```ts
import { escapeIdent } from "@tai-kun/surrealdb/utils";

console.log(escapeIdent(""));
console.log(escapeIdent("123"));
console.log(escapeIdent("foo-bar"));
console.log(escapeIdent("ğ©¸½'s `feed`"));
console.log(escapeIdent("'ğŸ‘ğŸ½`"));
console.log(escapeIdent("'ãƒã‚š`"));
```

Output:

```js
``
`123`
`foo-bar`
`ğ©¸½'s \`feed\``
`'ğŸ‘ğŸ½\``
`'ãƒã‚š\``
```

## Column

### String Length

The strings used in the previous examples contain characters that have different string lengths from the JavaScript perspective and the human perspective:

| Type | Display | `.length` | `Uint8Array` |
| --- | --- | --- | --- |
| ASCII | a | 1 | `[ 0x61 ]` |
| Surrogate Pair | ğ©¸½ | 2 | `[ 0xF0, 0xA9, 0xB8, 0xBD ]` |
| Variation Selector | ğŸ‘ğŸ½ | 4 | `[ 0xF0, 0x9F, 0x91, 0x8D, 0xF0, 0x9F, 0x8F, 0xBD ]` |
| Combining Character | ãƒã‚š | 2 | `[ 0xE3, 0x83, 0x8F, 0xE3, 0x82, 0x9A ]` |

If the value of `.length` is counterintuitive, you need to be careful about operations on strings.
