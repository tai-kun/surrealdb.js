---
title: Other Tools
slug: en/v2/api/cbor/others
---

## write

### Import

```ts
import { write } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`write` is a helper function that writes all JavaScript values that can be encoded into CBOR format to the `Writer`.

```ts
write(writer: Writer, value: unknown, options?: WriteOptions): void;
```

#### Arguments

##### `writer`

The `Writer` to write the value into a `Uint8Array`.

##### `value`

The JavaScript value to encode into a CBOR formatted `Uint8Array`. The JavaScript values that can be passed to `value` are as follows:

- Primitive values
  - `number`
  - `bigint`
  - `string`
  - `boolean`
  - `null`
  - `undefined`
- Objects with the `.toCBOR()` method
- Arrays or `Set`
- Plain objects or `Map`
- `Uint8Array`
- `Simple` objects
- Values that can be replaced by an optional `replacer`

If it is not a primitive value and has the `toCBOR` property as a function, it will be called preferentially.

##### `options`

Write options.

`replacer?: Replacer | Replacer[]`
:   The encoder encodes most values into CBOR by default, but you can replace special values that don't fall under them with encodable values. This option implements the replacement process by specifying a function or an array of functions. If the function returns the `CONTINUE` symbol obtained by `Symbol.for("@tai-kun/surrealdb/cbor/continue")`, the subsequent functions are called. If no replacement is possible, a `SurrealTypeError` will be thrown.

`isSafeMapKey?: (key: unknown, map: ReadonlyMap<unknown, unknown>) => boolean`
:   This option is a function that verifies whether the key of a `Map` object is safe. The function takes two arguments: `key` and `map`. `key` is the value of the key, and `map` is the `Map` object being validated. If this function returns `false`, a `CborUnsafeMapKeyError` will be thrown. By default, `"__proto__"` or `"constructor"` is considered an unsafe key. Note that specifying this option completely overrides the default verification. If you want to add your own validation to the default validation, you should also consider `"__proto__"` or `"constructor"` as unsafe keys.

`isSafeObjectKey?: (key: unknown, obj: { readonly [p: string]: unknown }) => boolean`
:   This option is a function that verifies whether the key of a plain object is safe. The function takes two arguments: `key` and `obj`. `key` is the value of the key, and `obj` is the plain object being validated. If this function returns `false`, a `CborUnsafeMapKeyError` will be thrown. By default, `"__proto__"` or `"constructor"` is considered an unsafe key. Note that specifying this option completely overrides the default verification. If you want to add your own validation to the default validation, you should also consider `"__proto__"` or `"constructor"` as unsafe keys.

#### Return Value

None.

## writeNumber

### Import

```ts
import { writeNumber } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writeNumber` is a helper function that writes numbers to the `Writer`.

```ts
writeNumber(writer: Writer, value: number): void;
```

#### Arguments

##### `writer`

The `Writer` to write the value into a `Uint8Array`.

##### `value`

A number. For integers, values from -2^53-1 to 2^53-1 are valid. In JavaScript, there is no way to determine `.0` as a floating point number, so it is encoded into CBOR as an integer value. For example, `-1.0` is `-1` and is an integer.

#### Return Value

None.

## writeBigInt

### Import

```ts
import { writeInteger } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writeBigInt` is a helper function that writes `bigint` values to the `Writer`.

```ts
writeBigInt(writer: Writer, value: bigint): void;
```

#### Arguments

##### `writer`

The `Writer` to write the value into a `Uint8Array`.

##### `value`

A `bigint`. Values from -2^64 to 2^64-1 are valid.

#### Return Value

None.

## writeByteString

### Import

```ts
import { writeByteString } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writeByteString` is a helper function that writes `Uint8Array` to the `Writer`.

```ts
writeByteString(writer: Writer, value: Uint8Array): void;
```

#### Arguments

##### `writer`

The `Writer` to write the value into a `Uint8Array`.

##### `value`

A `Uint8Array`.

#### Return Value

None.

## writeUtf8String

### Import

```ts
import { writeUtf8String } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writeUtf8String` is a helper function that writes UTF-8 encoded strings to the `Writer`.

```ts
writeUtf8String(writer: Writer, value: string): void;
```

#### Arguments

##### `writer`

The `Writer` to write the value into a `Uint8Array`.

##### `value`

A UTF-8 encoded string.

#### Return Value

None.

## writeEncodedUtf8String

### Import

```ts
import { writeEncodedUtf8String } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writeEncodedUtf8String` is a helper function that writes UTF-8 encoded strings (`Uint8Array`) to the `Writer`.

```ts
writeEncodedUtf8String(writer: Writer, value: Uint8Array): void;
```

#### Arguments

##### `writer`

The `Writer` to write the value into a `Uint8Array`.

##### `value`

A UTF-8 encoded string (`Uint8Array`).

#### Return Value

None.

## writeBoolean

### Import

```ts
import { writeBoolean } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writeBoolean` is a helper function that writes boolean values to the `Writer`.

```ts
writeBoolean(writer: Writer, value: boolean): void;
```

#### Arguments

##### `writer`

The `Writer` to write the value into a `Uint8Array`.

##### `value`

A boolean value.

#### Return Value

None.

## writeNullable

### Import

```ts
import { writeNullable } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writeNullable` is a helper function that writes `null` or `undefined` to the `Writer`.

```ts
writeNullable(writer: Writer, value: null | undefined): void;
```

#### Arguments

##### `writer`

The `Writer` to write the value into a `Uint8Array`.

##### `value`

`null` or `undefined`.

#### Return Value

None.

## writeHeader

### Import

```ts
import { writeHeader } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writeHeader` is a helper function that writes the header of a CBOR data item to the `Writer`.

```ts
writeHeader(writer: Writer, mt: MajorType, length: number | bigint): void;
```

#### Arguments

##### `writer`

The `Writer` to write the value into a `Uint8Array`.

##### `mt`

The CBOR major type. It must be an integer value from 0 to 7.

##### `length`

The length of the data itself or the data in bytes.

#### Return Value

None.

## writePayload

### Import

```ts
import { writePayload } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writePayload` is a helper function that writes the payload of a CBOR data item to the `Writer`.

```ts
writePayload(writer: Writer, value: Uint8Array): void;
```

#### Arguments

##### `writer`

The `Writer` to write the value into a `Uint8Array`.

##### `value`

The payload of the CBOR data item.

#### Return Value

None.
