---
title: Other Tools
---

## write

### Import

```ts
import { write } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`write` is a helper function that writes any JavaScript value encodable in CBOR format to a `Writer`.

```ts
write(writer: Writer, value: unknown, options?: WriteOptions): void;
```

#### Arguments

##### `writer`

A `Writer` to write the value to a `Uint8Array`.

##### `value`

A JavaScript value to be encoded into a CBOR `Uint8Array`. The following JavaScript values can be passed to `value`:

- Primitive values
  - `number`
  - `bigint`
  - `string`
  - `boolean`
  - `null`
  - `undefined`
- Objects with a `.toCBOR()` method
- Arrays or `Set`
- Plain objects or `Map`
- `Uint8Array`
- `Simple` objects
- Values that can be replaced with an optional `replacer`

If it is not a primitive value and the `toCBOR` property is a function, it will be called preferentially.

##### `options`

Writing options.

`replacer?: Replacer | Replacer[]`
:   The encoder encodes most values to CBOR by default, but there are special values that are not. You can replace these special values with encodable values. This option implements the replacement process by specifying a function or an array of functions. If the function returns the `CONTINUE` symbol obtained by `Symbol.for("@tai-kun/surrealdb/cbor/continue")`, the subsequent functions will be called. If nothing can be replaced, a `SurrealTypeError` is thrown.

`isSafeMapKey?: (key: unknown, map: ReadonlyMap<unknown, unknown>) => boolean`
:   This option is a function that checks if the key of a `Map` object is safe. The function accepts two arguments: `key` and `map`. `key` is the value of the key, and `map` is the `Map` object being validated. If this function returns `false`, a `CborUnsafeMapKeyError` is thrown. By default, it determines that `"__proto__"` or `"constructor"` are unsafe keys. Note that specifying this option will completely overwrite the default validation. If you want to add your own validation to the default validation, you should also determine that `"__proto__"` or `"constructor"` are unsafe keys.

`isSafeObjectKey?: (key: unknown, obj: { readonly [p: string]: unknown }) => boolean`
:   This option is a function that checks if the key of a plain object is safe. The function accepts two arguments: `key` and `obj`. `key` is the value of the key, and `obj` is the plain object being validated. If this function returns `false`, a `CborUnsafeMapKeyError` is thrown. By default, it determines that `"__proto__"` or `"constructor"` are unsafe keys. Note that specifying this option will completely overwrite the default validation. If you want to add your own validation to the default validation, you should also determine that `"__proto__"` or `"constructor"` are unsafe keys.

#### Return Value

None.

## writeNumber

### Import

```ts
import { writeNumber } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writeNumber` is a helper function that writes a number to a `Writer`.

```ts
writeNumber(writer: Writer, value: number): void;
```

#### Arguments

##### `writer`

A `Writer` to write the value to a `Uint8Array`.

##### `value`

A number. If it is an integer, a value from -2^53-1 to 2^53-1 is valid. In JavaScript, there is no way to determine `.0` as a floating-point number, so it will be encoded into CBOR as an integer value. For example, `-1.0` is `-1` and is an integer.

#### Return Value

None.

## writeBigInt

### Import

```ts
import { writeInteger } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writeBigInt` is a helper function that writes a `bigint` to a `Writer`.

```ts
writeBigInt(writer: Writer, value: bigint): void;
```

#### Arguments

##### `writer`

A `Writer` to write the value to a `Uint8Array`.

##### `value`

A `bigint`. A value from -2^64 to 2^64-1 is valid.

#### Return Value

None.

## writeByteString

### Import

```ts
import { writeByteString } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writeByteString` is a helper function that writes a `Uint8Array` to a `Writer`.

```ts
writeByteString(writer: Writer, value: Uint8Array): void;
```

#### Arguments

##### `writer`

A `Writer` to write the value to a `Uint8Array`.

##### `value`

A `Uint8Array`.

#### Return Value

None.

## writeUtf8String

### Import

```ts
import { writeUtf8String } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writeUtf8String` is a helper function that writes a UTF-8 encoded string to a `Writer`.

```ts
writeUtf8String(writer: Writer, value: string): void;
```

#### Arguments

##### `writer`

A `Writer` to write the value to a `Uint8Array`.

##### `value`

A UTF-8 encoded string.

#### Return Value

None.

## writeEncodedUtf8String

### Import

```ts
import { writeEncodedUtf8String } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writeEncodedUtf8String` is a helper function that writes a UTF-8 encoded string (`Uint8Array`) to a `Writer`.

```ts
writeEncodedUtf8String(writer: Writer, value: Uint8Array): void;
```

#### Arguments

##### `writer`

A `Writer` to write the value to a `Uint8Array`.

##### `value`

A UTF-8 encoded string (`Uint8Array`).

#### Return Value

None.

## writeBoolean

### Import

```ts
import { writeBoolean } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writeBoolean` is a helper function that writes a boolean to a `Writer`.

```ts
writeBoolean(writer: Writer, value: boolean): void;
```

#### Arguments

##### `writer`

A `Writer` to write the value to a `Uint8Array`.

##### `value`

A boolean.

#### Return Value

None.

## writeNullable

### Import

```ts
import { writeNullable } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writeNullable` is a helper function that writes `null` or `undefined` to a `Writer`.

```ts
writeNullable(writer: Writer, value: null | undefined): void;
```

#### Arguments

##### `writer`

A `Writer` to write the value to a `Uint8Array`.

##### `value`

`null` or `undefined`.

#### Return Value

None.

## writeHeader

### Import

```ts
import { writeHeader } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writeHeader` is a helper function that writes a CBOR data item header to a `Writer`.

```ts
writeHeader(writer: Writer, mt: MajorType, length: number | bigint): void;
```

#### Arguments

##### `writer`

A `Writer` to write the value to a `Uint8Array`.

##### `mt`

The CBOR major type. It must be an integer value from 0 to 7.

##### `length`

The length of the data itself or the length of the data in bytes.

#### Return Value

None.

## writePayload

### Import

```ts
import { writePayload } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writePayload` is a helper function that writes the payload of a CBOR data item to a `Writer`.

```ts
writePayload(writer: Writer, value: Uint8Array): void;
```

#### Arguments

##### `writer`

A `Writer` to write the value to a `Uint8Array`.

##### `value`

The payload of the CBOR data item.

#### Return Value

None.
