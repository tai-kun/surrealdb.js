---
title: Queries
---

import Badge from "~/components/en/Badge.astro";

### `.query()` <Badge variant="instance" /><Badge variant="method" />

Executes custom SurrealQL.

```ts
query(
  surql: string | object,
  vars?: { [p: string]: unknown },
  options?: ClientRpcOptions,
): Promise<unknown[]>;
```

#### Arguments

##### `surql`

A SurrealQL string or a pre-prepared query.

##### `vars`

Variables to pass when executing the SurrealQL. Be careful not to start variable names with `:`.

##### `options`

Options for the PRC request.

#### Returns

Returns a `Promise` object that resolves with an array of the results of the SurrealQL execution. It will reject with a `QueryFailedError` if any of the statements failed, including the error message for those statements.

There is no way to get the results if this method rejects. If you want to handle error handling manually, you can use [`.queryRaw()`](#queryraw).

#### Example

The following example executes a query successfully:

```ts
import { Surreal } from "@tai-kun/surrealdb";

const db = new Surreal();
await db.connect("ws://localhost:8000");

const results = await db.query(`
  CREATE ONLY user:foo CONTENT { age: 42 };
`);
console.log(results);
// [{
//   id: Thing { tb: 'user', id: 'foo' },
//   age: 42
// }]

await db.close();
```

The following example will have one statement that fails, causing the query to be rejected with a `QueryFailedError`:

```ts
import { Surreal } from "@tai-kun/surrealdb";

const db = new Surreal();
await db.connect("ws://localhost:8000");

const results = await db.query(`
  CREATE ONLY user:foo CONTENT { age: 42 };
  OUTPUT 42;
`); // throws QueryFailedError: Query failed with 1 error(s)
```

The following example executes a pre-prepared query:

```ts
import { surql, Surreal, Thing } from "@tai-kun/surrealdb";

const CreateUserQuery = surql`
  CREATE ONLY user:foo CONTENT { age: 42 };
`.returns<[{ id: Thing<"user">, age: number }]>()

const db = new Surreal();
await db.connect("ws://localhost:8000");

const results = await db.query(CreateUserQuery);
   // ^? const results: [{ id: Thing<"user">, age: number }]

await db.close();
```

### `.queryRaw()` <Badge variant="instance" /><Badge variant="method" />

Executes custom SurrealQL.

```ts
queryRaw(
  surql: string | object,
  vars?: { [p: string]: unknown },
  options?: ClientRpcOptions,
): Promise<QueryResult[]>;
```

#### Arguments

##### `surql`

A SurrealQL string or a pre-prepared query.

##### `vars`

Variables to pass when executing the SurrealQL. Be careful not to start variable names with `:`.

##### `options`

Options for the PRC request.

#### Returns

Returns a `Promise` object that resolves with an array of the results of the SurrealQL execution.

```ts
type QueryResult = {
  status: "OK";
  time: string;
  result: unknown;
} | {
  status: "ERR";
  time: string;
  result: string;
};
```
