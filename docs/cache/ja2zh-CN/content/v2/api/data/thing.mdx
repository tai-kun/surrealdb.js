---
title: 事物
slug: zh-CN/v2/api/data/thing
---

import Badge from "~/components/zh-CN/Badge.astro";

`Thing` 是用于表示 [记录 ID](https://surrealdb.com/docs/surrealql/datamodel/ids) 的类。

### 导入

```ts
import { Thing } from "@tai-kun/surrealdb/data-types/decode-only";
import { Thing } from "@tai-kun/surrealdb/data-types/encodable";
import { Thing } from "@tai-kun/surrealdb/data-types/standard";
```

### `.constructor()`

创建新的 `Thing` 对象。

```ts
new Thing(source: [tb: string, id: string | number | bigint | object]);
new Thing(tb: string, id: string | number | bigint | object);
```

#### 参数

##### `source`

记录 ID 的表格部分和 ID 部分的配对。

##### `tb`

记录 ID 的表格部分。

##### `id`

记录 ID 的 ID 部分。

#### 返回值

如果通过 `new` 调用，`Thing` 会返回其实例。

### `.tb` <Badge variant="instance" /><Badge variant="property" /><Badge variant="decodeonly" />

记录 ID 的表格部分。获取此属性时，字符串不会被转义。

```ts
.tb: string;
```

#### 示例

获取此属性时，字符串不会被转义。

```ts
import { Thing } from "@tai-kun/surrealdb/data-types/decode-only";

const thing = new Thing("foo-bar", 0);
console.log(this.id);
//-> foo-bar
```

### `.id` <Badge variant="instance" /><Badge variant="property" /><Badge variant="decodeonly" />

记录 ID 的 ID 部分。

```ts
.id: string | number | bigint | object;
```

### `.toString()` <Badge variant="instance" /><Badge variant="method" /><Badge variant="encodable" />

将 `Thing` 对象转换为可在 SurrealQL 中使用的变量字符串。表格名和 ID 部分将分别使用与 SurrealDB 实现相同的方式进行转义和格式化。此外，对象的属性将按升序排序。

`.valueOf()` 和 `.toJSON()` 会返回与该方法相同的结果。

```ts
.toString(): string;
```

#### 参数

无。

#### 返回值

返回格式化的记录 ID 字符串。

#### 示例

```ts
import { Thing } from "@tai-kun/surrealdb/data-types/encodable";

const thing = new Thing([
  "foo-bar",
  new Uuid("018fb2c0-7bb7-7fca-8308-b24d0be065dc"),
]);
console.log(thing.toString());
//-> ⟨foo-bar⟩:u'018fb2c0-7bb7-7fca-8308-b24d0be065dc'
```

### `.toSurql()` <Badge variant="instance" /><Badge variant="method" /><Badge variant="encodable" />

将 `Thing` 对象转换为可以嵌入 SurrealQL 的字符串。与 `.toString()` 类似，但会添加 `r` 前缀，以便告诉查询解析器该字符串是记录 ID。

```ts
.toSurql(): string;
```

#### 参数

无。

#### 返回值

返回格式化的记录 ID 字符串。

#### 示例

```ts
import { Thing } from "@tai-kun/surrealdb/data-types/encodable";

const thing = new Thing("foo", "bar");
console.log(thing.toSurql());
//-> r'foo:bar'
```

### `.clone()` <Badge variant="instance" /><Badge variant="method" /><Badge variant="standard" />

复制 `Thing` 对象。但是 ID 部分不会被复制，而是会被引用。

```ts
.clone(): this;
```

#### 参数

无。

#### 返回值

返回新的 `Thing` 对象。如果继承了 `Thing` 类，则会返回该类的实例。

### 扩展

#### 类型保护

可以使用类型参数为 `Thing` 的表格部分和 ID 部分分别提供类型安全性：

```ts
import { Thing, Uuid } from "@tai-kun/surrealdb/data-types/standard";

function isUserRecordId(thing: unknown): thing is Thing<"user", Uuid> {
  return thing instanceof Thing
    && thing.tb === "user"
    && thing.id instanceof Uuid
}
```

#### `Thing` 对象的通用判定

建议使用 `isThing` 函数来判定值是否为 `Thing` 对象，而不依赖于预设。该函数不使用 `instanceof`，因此在验证值的预设未知时非常有用。

```ts
import { isThing } from "@tai-kun/surrealdb";
```
