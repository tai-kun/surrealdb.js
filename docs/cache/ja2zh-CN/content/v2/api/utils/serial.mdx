---
title: 序列化
slug: zh-CN/v2/api/utils/serial
---

import Badge from "~/components/zh-CN/Badge.astro";

`Serial` 是一个用于生成增量 ID 的类。它被用于生成双向通信中的 RPC 请求 ID。ID 是循环生成的，以确保 ID 在达到安全整数值之前不会溢出。如果 ID 超过该值，它将重置为 1。

### 导入

```ts
import { Serial } from "@tai-kun/surrealdb/utils";
```

### `.constructor()`

```ts
new Serial(max?: number);
```

#### 参数

##### `max`

设置增量 ID 的最大值。有效值为 1 到 2^53-1 之间的整数。默认值为 2^53-1。

#### 返回值

当通过 `new` 调用时，`Serial` 将返回其实例。

#### 例子

以下示例展示了基本用法：

```ts
import { Serial } from "@tai-kun/surrealdb/utils";

const id = new Serial(3);

console.log(id.next());
console.log(id.next());
console.log(id.next());

console.log(id.next());
console.log(id.next());

id.reset();

console.log(id.next());
console.log(id.next());
```

输出：

```js
1
2
3
1
2
1
2
```

### `.next()` <Badge variant="instance" /><Badge variant="method" />

`.next` 是一个用于获取下一个 ID 的函数。

```ts
next(): number;
```

#### 参数

无。

#### 返回值

返回一个 1 到 `max` 之间的整数。如果该值是最大值，则下一个获取的值将是 1。

### `.reset()` <Badge variant="instance" /><Badge variant="method" />

```ts
reset(): void;
```

#### 参数

无。

#### 返回值

无。
