---
title: Other Tools
slug: en/v2/api/cbor/others
---

## write

### Import

```ts
import { write } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`write` is a helper function that writes any JavaScript value that can be encoded to CBOR into a `Writer`.

```ts
write(writer: Writer, value: unknown, options?: WriteOptions): void;
```

#### Arguments

##### `writer`

A `Writer` used to write values to a `Uint8Array`.

##### `value`

A JavaScript value to encode to a CBOR `Uint8Array`. The following JavaScript values can be passed to `value`:

- Primitive values
  - `number`
  - `bigint`
  - `string`
  - `boolean`
  - `null`
  - `undefined`
- Objects with a `.toCBOR()` method
- Arrays or `Set`
- Plain objects or `Map`
- `Uint8Array`
- `Simple` objects
- Values that can be replaced with an optional `replacer`

If the value is not a primitive and has a `toCBOR` property that is a function, it will be called preferentially.

##### `options`

Write options.

`replacer?: Replacer | Replacer[]`
:   While the encoder encodes most values to CBOR by default, there are special values that don't fit in this category. They can be replaced with encodable values by specifying this option. It can be specified with a function or an array of functions to implement this replacement. If the function returns the `CONTINUE` symbol that can be obtained with `Symbol.for("@tai-kun/surrealdb/cbor/continue")`, subsequent functions are called. If nothing is replaced, a `SurrealTypeError` is thrown.

`isSafeMapKey?: (key: unknown, map: ReadonlyMap<unknown, unknown>) => boolean`
:   This option is a function that verifies whether the key of a `Map` object is safe. The function accepts two arguments: `key` and `map`. `key` is the value of the key and `map` is the `Map` object being verified. If this function returns `false`, a `CborUnsafeMapKeyError` is thrown. By default, `"__proto__"` or `"constructor"` are considered unsafe keys. Note that specifying this option completely overrides the default verification. If you want to add your own verification to the default verification, you should also consider `"__proto__"` or `"constructor"` as unsafe keys.

`isSafeObjectKey?: (key: unknown, obj: { readonly [p: string]: unknown }) => boolean`
:   This option is a function that verifies whether the key of a plain object is safe. The function accepts two arguments: `key` and `obj`. `key` is the value of the key and `obj` is the plain object being verified. If this function returns `false`, a `CborUnsafeMapKeyError` is thrown. By default, `"__proto__"` or `"constructor"` are considered unsafe keys. Note that specifying this option completely overrides the default verification. If you want to add your own verification to the default verification, you should also consider `"__proto__"` or `"constructor"` as unsafe keys.

#### Return value

None.

## writeNumber

### Import

```ts
import { writeNumber } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writeNumber` is a helper function that writes a number into a `Writer`.

```ts
writeNumber(writer: Writer, value: number): void;
```

#### Arguments

##### `writer`

A `Writer` used to write values to a `Uint8Array`.

##### `value`

A number. For integers, values from -2^53-1 to 2^53-1 are valid. JavaScript does not have a way to determine `.0` as a floating-point number, so it is encoded to CBOR as an integer value. For example, `-1.0` is `-1` and is an integer.

#### Return value

None.

## writeBigInt

### Import

```ts
import { writeInteger } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writeBigInt` is a helper function that writes a `bigint` into a `Writer`.

```ts
writeBigInt(writer: Writer, value: bigint): void;
```

#### Arguments

##### `writer`

A `Writer` used to write values to a `Uint8Array`.

##### `value`

A `bigint`. Values from -2^64 to 2^64-1 are valid.

#### Return value

None.

## writeByteString

### Import

```ts
import { writeByteString } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writeByteString` is a helper function that writes a `Uint8Array` into a `Writer`.

```ts
writeByteString(writer: Writer, value: Uint8Array): void;
```

#### Arguments

##### `writer`

A `Writer` used to write values to a `Uint8Array`.

##### `value`

A  `Uint8Array`.

#### Return value

None.

## writeUtf8String

### Import

```ts
import { writeUtf8String } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writeUtf8String` is a helper function that writes a UTF-8 encoded string into a `Writer`.

```ts
writeUtf8String(writer: Writer, value: string): void;
```

#### Arguments

##### `writer`

A `Writer` used to write values to a `Uint8Array`.

##### `value`

A UTF-8 encoded string.

#### Return value

None.

## writeEncodedUtf8String

### Import

```ts
import { writeEncodedUtf8String } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writeEncodedUtf8String` is a helper function that writes a UTF-8 encoded string (`Uint8Array`) into a `Writer`.

```ts
writeEncodedUtf8String(writer: Writer, value: Uint8Array): void;
```

#### Arguments

##### `writer`

A `Writer` used to write values to a `Uint8Array`.

##### `value`

A UTF-8 encoded string (`Uint8Array`).

#### Return value

None.

## writeBoolean

### Import

```ts
import { writeBoolean } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writeBoolean` is a helper function that writes a boolean into a `Writer`.

```ts
writeBoolean(writer: Writer, value: boolean): void;
```

#### Arguments

##### `writer`

A `Writer` used to write values to a `Uint8Array`.

##### `value`

A boolean.

#### Return value

None.

## writeNullable

### Import

```ts
import { writeNullable } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writeNullable` is a helper function that writes `null` or `undefined` into a `Writer`.

```ts
writeNullable(writer: Writer, value: null | undefined): void;
```

#### Arguments

##### `writer`

A `Writer` used to write values to a `Uint8Array`.

##### `value`

`null` or `undefined`.

#### Return value

None.

## writeHeader

### Import

```ts
import { writeHeader } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writeHeader` is a helper function that writes the header of a CBOR data item into a `Writer`.

```ts
writeHeader(writer: Writer, mt: MajorType, length: number | bigint): void;
```

#### Arguments

##### `writer`

A `Writer` used to write values to a `Uint8Array`.

##### `mt`

The CBOR major type. It must be an integer value from 0 to 7.

##### `length`

The data itself or the byte length of the data.

#### Return value

None.

## writePayload

### Import

```ts
import { writePayload } from "@tai-kun/surrealdb/cbor";
```

### Syntax

`writePayload` is a helper function that writes the payload of a CBOR data item into a `Writer`.

```ts
writePayload(writer: Writer, value: Uint8Array): void;
```

#### Arguments

##### `writer`

A `Writer` used to write values to a `Uint8Array`.

##### `value`

The payload of a CBOR data item.

#### Return value

None.
