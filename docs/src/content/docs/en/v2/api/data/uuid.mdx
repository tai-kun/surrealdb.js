---
title: Uuid
slug: en/v2/api/data/uuid
---

import Badge from "~/components/en/Badge.astro";

A UUID (Universally Unique Identifier) is a 128-bit identifier used to uniquely identify a particular entity. The `Uuid` class represents this identifier. It supports UUIDs from version 1 to version 7. Note that you need to use a separate library or a built-in function in your runtime (such as `node:crypto`) to generate a UUID.

### Import

```ts
import { Uuid } from "@tai-kun/surrealdb/decodeonly-datatypes";
import { Uuid } from "@tai-kun/surrealdb/encodable-datatypes";
import { Uuid } from "@tai-kun/surrealdb/standard-datatypes";
```

### `.constructor()`

Creates a new `Uuid` object.

```ts
new Uuid(source: Uint8Array); // decode-only, encodable
new Uuid(source: Uint8Array | string); // standard
```

#### Arguments

##### `source`

The byte array representation of the UUID or a string if it is a standard preset.

#### Return value

When called via `new`, `Uuid` returns its instance.

### `.bytes` <Badge variant="instance" /><Badge variant="property" /><Badge variant="decodeonly" />

The byte array of the UUID.

```ts
.bytes: Uint8Array;
```

### `.variant` <Badge variant="instance" /><Badge variant="property" /><Badge variant="standard" />

The variant of the UUID. This is defined by the upper 3 bits of the 13th byte of the UUID. There are 3 main variants and 1 reserved for future use:

1. NCS compatible
    - `0b0xxx`
    - Indicates that the UUID is compatible with the Network Computing System (NCS).
    - Not commonly used.
2. RFC 4122 compatible
    - `0b10xx`
    - UUID based on RFC 4122, the standard specification for UUIDs.
    - The commonly used format for UUIDs. Includes formats like v1 (time-based) and v4 (random).
3. Microsoft GUID compatible
    - `0b110x`
    - The format of GUID (Globally Unique Identifier) used by Microsoft.
4. Reserved for future use
    - `0b111x`

This property also represents the NIL UUID and the MAX UUID in addition to the variants above.

```ts
.variant:
  | "NIL" // 00000000-0000-0000-0000-000000000000
  | "MAX" // ffffffff-ffff-ffff-ffff-ffffffffffff
  | "NCS" // 0xxx (0b0000 ~ 0b0111)
  | "RFC" // 10xx (0b1000 ~ 0b1011)
  | "MS" // 110x (0b1100 ~ 0b1101)
  | "RESERVED"; // 111x (0b1110 ~ 0b1111)
```

### `.version` <Badge variant="instance" /><Badge variant="property" /><Badge variant="standard" />

The UUID version number if the variant is `"RFC"`. Otherwise, it is `null`.

```ts
.version: 1 | 2 | 3 | 4 | 5 | 6 | 7 | null;
```

### `.timestamp` <Badge variant="instance" /><Badge variant="property" /><Badge variant="standard" />

The timestamp part if the variant is `"RFC"` and the version is either v1, v6, or v7. Otherwise, it is `null`. For convenience, all timestamps are calculated as milliseconds since the UNIX epoch.

```ts
.timestamp: number | null;
```

### `.toString()` <Badge variant="instance" /><Badge variant="method" /><Badge variant="encodable" />

Converts a `Uuid` object to a string that can be used in a SurrealQL variable.

`.valueOf()` and `.toJSON()` return the same result as this method.

```ts
.toString(): string;
```

#### Arguments

None.

#### Return value

Returns a hexadecimal UUID string.

#### Example

```ts
import { Uuid } from "@tai-kun/surrealdb/encodable-datatypes";

const bytes = new Uint8Array([
  0x26, 0xc8, 0x01, 0x63,
  0x3b, 0x83,
  0x48, 0x1b,
  0x93, 0xda,
  0xc4, 0x73, 0x94, 0x7c, 0xcc, 0xbc,
]);
const uuid = new Uuid(bytes);
console.log(uuid.toString());
//-> 26c80163-3b83-481b-93da-c473947cccbc
```

### `.toSurql()` <Badge variant="instance" /><Badge variant="method" /><Badge variant="encodable" />

Converts a `Uuid` object to a string that can be embedded into SurrealQL. Similar to `.toString()` but it adds a `u` prefix to tell the query parser that the string is a UUID.

```ts
.toSurql(): string;
```

#### Arguments

None.

#### Return value

Returns a hexadecimal UUID string prefixed with `u`.

#### Example

```ts
import { Uuid } from "@tai-kun/surrealdb/encodable-datatypes";

const bytes = new Uint8Array([
  0x26, 0xc8, 0x01, 0x63,
  0x3b, 0x83,
  0x48, 0x1b,
  0x93, 0xda,
  0xc4, 0x73, 0x94, 0x7c, 0xcc, 0xbc,
]);
const uuid = new Uuid(bytes);
console.log(uuid.toSurql());
//-> u'26c80163-3b83-481b-93da-c473947cccbc'
```

### `.clone()` <Badge variant="instance" /><Badge variant="method" /><Badge variant="standard" />

Clones a `Uuid` object.

```ts
.clone(): this;
```

#### Arguments

None.

#### Return value

Returns a new `Uuid` object. If the `Uuid` class is inherited, the instance of that class is returned.

### `.compareTo()` <Badge variant="instance" /><Badge variant="method" /><Badge variant="standard" />

Compares the timestamps of `Uuid` objects.

```ts
.compareTo(other: Uuid): -1 | 0 | 1;
```

#### Arguments

##### `other`

The UUID to compare against.

#### Return value

Returns `0` if either one of them does not have a timestamp part or if they have the same timestamp. Returns `-1` if the timestamp of the other UUID is in the future, or `1` if it is in the past.

#### Example

The following example compares timestamps of different UUID versions and sorts them in ascending order:

```ts
import { Uuid } from "@tai-kun/surrealdb/standard-datatypes";

const uuidv1 = new Uuid("0e004000-2073-11ef-8451-eb2a011f8691");
const uuidv6 = new Uuid("1ef1fa9e-3968-6000-a77e-683eb1a35ebe");

console.log(new Date(uuidv1.timestamp).toISOString());
//-> 2024-06-02T00:00:00.000Z
console.log(new Date(uuidv6.timestamp).toISOString());
//-> 2024-06-01T00:00:00.000Z

const uuidList = [
  uuidv1,
  uuidv6,
];

uuidList.sort((a, b) => a.compareTo(b));

console.log(uuidList);
//-> [
//->   1ef1fa9e-3968-6000-a77e-683eb1a35ebe, (uuidv6)
//->   0e004000-2073-11ef-8451-eb2a011f8691, (uuidv1)
//-> ]
```

### Development

#### Generic determination of `Uuid` objects

To determine if a value is a `Uuid` object without depending on the preset, it is recommended to use the `isUuid` function. This function does not use `instanceof`, which is useful when the preset of the value to be validated is unknown.

```ts
import { isUuid } from "@tai-kun/surrealdb";
```
