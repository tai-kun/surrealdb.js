---
title: escape
slug: zh-CN/v2/api/utils/escape
---

## quoteStr

`quoteStr` å‡½æ•°ç”¨äºç»™å­—ç¬¦ä¸²æ·»åŠ å¼•å·ã€‚ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œå³ä½¿ç©ºå­—ç¬¦ä¸²ä¹Ÿä¼šè¢«åŠ ä¸Šå¼•å·ã€‚

### å¯¼å…¥

```javascript
import { quoteStr } from "@tai-kun/surrealdb/utils";
```

### ç”¨æ³•

```javascript
function quoteStr(str: string): string;
```

ç»™å­—ç¬¦ä¸²æ·»åŠ å¼•å·ï¼ˆ`"` æˆ– `'`)ã€‚

#### å‚æ•°

##### `str`

éœ€è¦æ·»åŠ å¼•å·çš„å­—ç¬¦ä¸²ã€‚

#### è¿”å›å€¼

è¿”å›æ·»åŠ äº†å¼•å·çš„å­—ç¬¦ä¸²ã€‚æ·»åŠ çš„å¼•å·ç±»å‹å–å†³äºç»™å®šçš„å­—ç¬¦ä¸²ä¸­æ˜¯å¦åŒ…å«å•å¼•å· (`'`)ï¼š

- å¦‚æœç»™å®šçš„å­—ç¬¦ä¸²ä¸ºç©º
  - è¿”å› `''`ã€‚
- å¦‚æœç»™å®šçš„å­—ç¬¦ä¸²**ä¸åŒ…å«**å•å¼•å·
  - ä½¿ç”¨å•å¼•å·å°†å­—ç¬¦ä¸²æ‹¬èµ·æ¥ã€‚
- å¦‚æœç»™å®šçš„å­—ç¬¦ä¸²**åŒ…å«**å•å¼•å·
  - ä½¿ç”¨åŒå¼•å·å°†å­—ç¬¦ä¸²æ‹¬èµ·æ¥ã€‚
- å¦‚æœç»™å®šçš„å­—ç¬¦ä¸²æ—¢åŒ…å«å•å¼•å·åˆåŒ…å«åŒå¼•å·
  - ä½¿ç”¨åŒå¼•å·å°†å­—ç¬¦ä¸²æ‹¬èµ·æ¥ã€‚
  - åŒå¼•å·éœ€è¦ç”¨åæ–œæ  (`\`) è½¬ä¹‰ã€‚

#### ç¤ºä¾‹

ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œ**ä¸åŒ…å«**å•å¼•å·çš„å­—ç¬¦ä¸²ä¼šè¢«ä½¿ç”¨å•å¼•å·æ‹¬èµ·æ¥ï¼š

```javascript
import { quoteStr } from "@tai-kun/surrealdb/utils";

console.log(quoteStr(``));
console.log(quoteStr(`a`));
console.log(quoteStr(`ğ©¸½`));
console.log(quoteStr(`ğŸ‘ğŸ½`));
console.log(quoteStr(`ãƒã‚š`));
```

è¾“å‡ºï¼š

```js
''
'a'
'ğ©¸½'
'ğŸ‘ğŸ½'
'ãƒã‚š'
```

ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œ**åŒ…å«**å•å¼•å·çš„å­—ç¬¦ä¸²ä¼šè¢«ä½¿ç”¨åŒå¼•å·æ‹¬èµ·æ¥ï¼š

```javascript
import { quoteStr } from "@tai-kun/surrealdb/utils";

console.log(quoteStr(`cat's`));
console.log(quoteStr(`ğ©¸½'s`));
console.log(quoteStr(`'ğŸ‘ğŸ½`));
console.log(quoteStr(`'ãƒã‚š`));
```

è¾“å‡ºï¼š

```js
"cat's"
"ğ©¸½'s"
"'ğŸ‘ğŸ½"
"'ãƒã‚š"
```

ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼ŒåŒ…å«å•å¼•å·å’ŒåŒå¼•å·çš„å­—ç¬¦ä¸²ä¼šè¢«ä½¿ç”¨åŒå¼•å·æ‹¬èµ·æ¥ï¼Œå¹¶åœ¨éœ€è¦æ—¶è¿›è¡Œè½¬ä¹‰ï¼š

```javascript
import { quoteStr } from "@tai-kun/surrealdb/utils";

console.log(quoteStr(`cat's "toy"`));
console.log(quoteStr(`'\\"\\`));
console.log(quoteStr(`ğ©¸½'s "feed"`));
console.log(quoteStr(`'ğŸ‘ğŸ½"`));
console.log(quoteStr(`'ãƒã‚š"`));
```

è¾“å‡ºï¼š

```js
"cat's \"toy\""
"'\\\"\\"
"ğ©¸½'s \"feed\""
"'ğŸ‘ğŸ½\""
"'ãƒã‚š\""
```

## escapeKey

`escapeKey` ä¸ [`quoteStr`](/v2/api/utils/quote-str/) ç±»ä¼¼ï¼Œä½†å®ƒä¸“é—¨ç”¨äºå¤„ç†å¯¹è±¡çš„é”®ã€‚ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œå³ä½¿ç©ºå­—ç¬¦ä¸²ä¹Ÿä¼šè¢«åŠ ä¸Šå¼•å·ã€‚

### å¯¼å…¥

```javascript
import { escapeKey } from "@tai-kun/surrealdb/utils";
```

### ç”¨æ³•

```javascript
function escapeKey(key: string): string;
```

#### å‚æ•°

##### `key`

å¯¹è±¡çš„é”®ã€‚

#### è¿”å›å€¼

è¿”å›è½¬ä¹‰åçš„å­—ç¬¦ä¸²ã€‚åœ¨éœ€è¦æ—¶ä½¿ç”¨åŒå¼•å·å°†å…¶æ‹¬èµ·æ¥ï¼š

- å¦‚æœç»™å®šçš„å­—ç¬¦ä¸²ä¸ºç©º
  - è¿”å› `""`ã€‚
- å¦‚æœç»™å®šçš„å­—ç¬¦ä¸²åªåŒ…å«å­—æ¯æ•°å­—å’Œä¸‹åˆ’çº¿
  - ç›´æ¥è¿”å›è¯¥å­—ç¬¦ä¸²ã€‚
- å¦‚æœç»™å®šçš„å­—ç¬¦ä¸²åŒ…å«å­—æ¯æ•°å­—å’Œä¸‹åˆ’çº¿ä»¥å¤–çš„å­—ç¬¦
  - ä½¿ç”¨åŒå¼•å·å°†å…¶æ‹¬èµ·æ¥ã€‚
- å¦‚æœç»™å®šçš„å­—ç¬¦ä¸²åŒ…å«åæ–œæ  (`\`)
  - å¯¹å…¶è¿›è¡Œè½¬ä¹‰ã€‚
- å¦‚æœç»™å®šçš„å­—ç¬¦ä¸²åŒ…å«åŒå¼•å·
  - å¯¹å…¶è¿›è¡Œè½¬ä¹‰ã€‚

#### ç¤ºä¾‹

ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œå› ä¸ºå­—ç¬¦ä¸²åªåŒ…å«å­—æ¯æ•°å­—å’Œä¸‹åˆ’çº¿ï¼Œæ‰€ä»¥ç›´æ¥è¿”å›è¯¥å­—ç¬¦ä¸²ï¼š

```javascript
import { escapeKey } from "@tai-kun/surrealdb/utils";

console.log(escapeKey(`123`));
console.log(escapeKey(`foo_bar`));
```

è¾“å‡ºï¼š

```js
123
foo_bar
```

ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œä½¿ç”¨åŒå¼•å·å°†å­—ç¬¦ä¸²æ‹¬èµ·æ¥ï¼Œå¹¶åœ¨éœ€è¦æ—¶è¿›è¡Œè½¬ä¹‰ï¼š

```javascript
import { escapeKey } from "@tai-kun/surrealdb/utils";

console.log(escapeKey(``));
console.log(escapeKey(`foo-bar`));
console.log(escapeKey(`'\\"\\`));
console.log(escapeKey(`ğ©¸½'s "feed"`));
console.log(escapeKey(`'ğŸ‘ğŸ½"`));
console.log(escapeKey(`'ãƒã‚š"`));
```

è¾“å‡ºï¼š

```js
""
"foo-bar"
"'\\\"\\"
"ğ©¸½'s \"feed\""
"'ğŸ‘ğŸ½\""
"'ãƒã‚š\""
```

## escapeRid

`escapeRid` ä¸ [`quoteStr`](/v2/api/utils/quote-str/) ç±»ä¼¼ï¼Œä½†å®ƒä¸“é—¨ç”¨äºå¤„ç†è®°å½• IDã€‚ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œå³ä½¿ç©ºå­—ç¬¦ä¸²ä¹Ÿä¼šè¢«åŠ ä¸Šå¼•å·ã€‚

### å¯¼å…¥

```javascript
import { escapeRid } from "@tai-kun/surrealdb/utils";
```

### ç”¨æ³•

```javascript
function escapeRid(rid: string): string;
```

#### å‚æ•°

##### `rid`

è®°å½• ID çš„ ID éƒ¨åˆ†ã€‚

#### è¿”å›å€¼

è¿”å›è½¬ä¹‰åçš„å­—ç¬¦ä¸²ã€‚åœ¨éœ€è¦æ—¶ä½¿ç”¨å°–æ‹¬å· (`âŸ¨âŸ©`) å°†å…¶æ‹¬èµ·æ¥ï¼š

- å¦‚æœç»™å®šçš„å­—ç¬¦ä¸²ä¸ºç©º
  - è¿”å› `âŸ¨âŸ©`ã€‚
- å¦‚æœç»™å®šçš„å­—ç¬¦ä¸²ä¸ä»¥æ•°å­—å¼€å¤´ä¸”åªåŒ…å«å­—æ¯æ•°å­—å’Œä¸‹åˆ’çº¿
  - ç›´æ¥è¿”å›è¯¥å­—ç¬¦ä¸²ã€‚
- å¦‚æœç»™å®šçš„å­—ç¬¦ä¸²åŒ…å«å°–æ‹¬å· (`âŸ©`)
  - å¯¹å…¶è¿›è¡Œè½¬ä¹‰ã€‚
- å¦‚æœç»™å®šçš„å­—ç¬¦ä¸²å…¨éƒ¨ç”±æ•°å­—ç»„æˆæˆ–åŒ…å«å­—æ¯æ•°å­—å’Œä¸‹åˆ’çº¿ä»¥å¤–çš„å­—ç¬¦
  - ä½¿ç”¨å°–æ‹¬å· (`âŸ¨âŸ©`) å°†å…¶æ‹¬èµ·æ¥ã€‚

#### ç¤ºä¾‹

ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œå› ä¸ºå­—ç¬¦ä¸²ä¸ä»¥æ•°å­—å¼€å¤´ä¸”åªåŒ…å«å­—æ¯æ•°å­—å’Œä¸‹åˆ’çº¿ï¼Œæ‰€ä»¥ç›´æ¥è¿”å›è¯¥å­—ç¬¦ä¸²ï¼š

```javascript
import { escapeRid } from "@tai-kun/surrealdb/utils";

console.log(escapeRid(`foo_123`));
```

è¾“å‡ºï¼š

```js
foo_123
```

ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œä½¿ç”¨å°–æ‹¬å· (`âŸ¨âŸ©`) å°†å­—ç¬¦ä¸²æ‹¬èµ·æ¥ï¼Œå¹¶åœ¨éœ€è¦æ—¶è¿›è¡Œè½¬ä¹‰ï¼š

```javascript
import { escapeRid } from "@tai-kun/surrealdb/utils";

console.log(escapeRid(``));
console.log(escapeRid(`123`));
console.log(escapeRid(`foo-bar`));
console.log(escapeRid(`ğ©¸½'s âŸ¨feedâŸ©`));
console.log(escapeRid(`'ğŸ‘ğŸ½âŸ©`));
console.log(escapeRid(`'ãƒã‚šâŸ©`));
```

è¾“å‡ºï¼š

```js
âŸ¨âŸ©
âŸ¨123âŸ©
âŸ¨foo-barâŸ©
âŸ¨ğ©¸½'s âŸ¨feed\âŸ©âŸ©
âŸ¨'ğŸ‘ğŸ½\âŸ©âŸ©
âŸ¨'ãƒã‚š\âŸ©âŸ©
```

## escapeIdent

`escapeIdent` ä¸ [`quoteStr`](/v2/api/utils/quote-str/) ç±»ä¼¼ï¼Œä½†å®ƒä¸“é—¨ç”¨äºå¤„ç†å‘½åç©ºé—´ã€æ•°æ®åº“ã€è¡¨å’Œå­—æ®µçš„åç§°ã€‚ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œå³ä½¿ç©ºå­—ç¬¦ä¸²ä¹Ÿä¼šè¢«åŠ ä¸Šå¼•å·ã€‚

### å¯¼å…¥

```javascript
import { escapeIdent } from "@tai-kun/surrealdb/utils";
```

### ç”¨æ³•

```javascript
function escapeIdent(ident: string): string;
```

#### å‚æ•°

##### `ident`

æ ‡è¯†ç¬¦ã€‚

#### è¿”å›å€¼

è¿”å›è½¬ä¹‰åçš„å­—ç¬¦ä¸²ã€‚åœ¨éœ€è¦æ—¶ä½¿ç”¨åå¼•å· (<code>`</code>) å°†å…¶æ‹¬èµ·æ¥ï¼š

- å¦‚æœç»™å®šçš„å­—ç¬¦ä¸²ä¸ºç©º
  - è¿”å› <code>``</code>ã€‚{/* TODO(tai-kun): " ã«ãªã‚‹å•é¡Œè§£æ±ºã™ã‚‹ */}
- å¦‚æœç»™å®šçš„å­—ç¬¦ä¸²ä¸ä»¥æ•°å­—å¼€å¤´ä¸”åªåŒ…å«å­—æ¯æ•°å­—å’Œä¸‹åˆ’çº¿
  - ç›´æ¥è¿”å›è¯¥å­—ç¬¦ä¸²ã€‚
- å¦‚æœç»™å®šçš„å­—ç¬¦ä¸²åŒ…å«åå¼•å· (<code>`</code>)
  - å¯¹å…¶è¿›è¡Œè½¬ä¹‰ã€‚
- å¦‚æœç»™å®šçš„å­—ç¬¦ä¸²ä»¥æ•°å­—å¼€å¤´æˆ–åŒ…å«å­—æ¯æ•°å­—å’Œä¸‹åˆ’çº¿ä»¥å¤–çš„å­—ç¬¦
  - ä½¿ç”¨åå¼•å· (<code>`</code>) å°†å…¶æ‹¬èµ·æ¥ã€‚

#### ç¤ºä¾‹

ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œå› ä¸ºå­—ç¬¦ä¸²ä¸ä»¥æ•°å­—å¼€å¤´ä¸”åªåŒ…å«å­—æ¯æ•°å­—å’Œä¸‹åˆ’çº¿ï¼Œæ‰€ä»¥ç›´æ¥è¿”å›è¯¥å­—ç¬¦ä¸²ï¼š

```javascript
import { escapeIdent } from "@tai-kun/surrealdb/utils";

console.log(escapeIdent(`foo_123`));
```

è¾“å‡ºï¼š

```js
foo_123
```

ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œä½¿ç”¨åå¼•å· (<code>`</code>) å°†å­—ç¬¦ä¸²æ‹¬èµ·æ¥ï¼Œå¹¶åœ¨éœ€è¦æ—¶è¿›è¡Œè½¬ä¹‰ï¼š

```javascript
import { escapeIdent } from "@tai-kun/surrealdb/utils";

console.log(escapeIdent(""));
console.log(escapeIdent("123"));
console.log(escapeIdent("foo-bar"));
console.log(escapeIdent("ğ©¸½'s `feed`"));
console.log(escapeIdent("'ğŸ‘ğŸ½`"));
console.log(escapeIdent("'ãƒã‚š`"));
```

è¾“å‡ºï¼š

```js
``
`123`
`foo-bar`
`ğ©¸½'s \`feed\``
`'ğŸ‘ğŸ½\``
`'ãƒã‚š\``
```

## ä¸“æ 

### å­—ç¬¦ä¸²é•¿åº¦

å‰é¢ç¤ºä¾‹ä¸­ä½¿ç”¨çš„å­—ç¬¦ä¸²åŒ…å«ä¸€äº› JavaScript ä¸­çš„å­—ç¬¦ä¸²é•¿åº¦ä¸äººç±»ç†è§£çš„å­—ç¬¦ä¸²é•¿åº¦ä¸ä¸€è‡´çš„å­—ç¬¦ï¼š

| ç±»å‹ | æ˜¾ç¤º | `.length` | `Uint8Array` |
| --- | --- | --- | --- |
| ASCII | a | 1 | `[ 0x61 ]` |
| ä»£ç†å¯¹ | ğ©¸½ | 2 | `[ 0xF0, 0xA9, 0xB8, 0xBD ]` |
| å˜ä½“é€‰æ‹©å™¨ | ğŸ‘ğŸ½ | 4 | `[ 0xF0, 0x9F, 0x91, 0x8D, 0xF0, 0x9F, 0x8F, 0xBD ]` |
| ç»„åˆå­—ç¬¦ | ãƒã‚š | 2 | `[ 0xE3, 0x83, 0x8F, 0xE3, 0x82, 0x9A ]` |

å½“ `.length` çš„å€¼ä¸ç›´è§‰ä¸ç¬¦æ—¶ï¼Œéœ€è¦è°¨æ…è€ƒè™‘å¯¹å­—ç¬¦ä¸²çš„æ“ä½œã€‚
